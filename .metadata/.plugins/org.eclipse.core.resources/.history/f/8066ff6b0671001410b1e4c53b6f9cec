public class Solution {
	
	public static void main(String arg[]){
		String s = "(()()))";
		Solution ss = new Solution();
		System.out.print(ss.longestValidParentheses(s));
	}
	
    public int longestValidParentheses(String s) {
        int n = s.length();
        int opt[][] = new int[n][n];
        
        // edge case
        if(s.length()==0){return 0;}
        
        // iteration
        for(int offset = 1;offset < n;offset++){
            for(int i = 0;i < n;i++){
                int j = i + offset;
                if(j < n)
                    opt[i][j] = s.charAt(i)==s.charAt(j)?opt[i+1][j-1]+1:Math.max(opt[i+1][j],opt[i][j-1]);
                else
                    break;
            }
        }
        
        return opt[0][n-1];
    }
}